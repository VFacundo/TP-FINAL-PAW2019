<?php include('assets/template/baseHead.html'); ?>
<head>
	<title>Mis Turnos</title>
	<link rel="stylesheet" href="/assets/css/turnos.css">
	<script src="assets/js/toggleSection.js"></script>
	<script>var toggleBtnEquipo = new toggleSection.iniciarBtn(),
					toggleBtnSec = new toggleSection.iniciarBtnSec();</script>

	<script src="assets/js/mostrarDetalles.js"></script>
	<script src="assets/js/turnos.js"></script>
	<script> turnos.init(); </script>
	<script src="assets/js/instantSearch.js"></script>
	<script> instantSearch.init("eq_rival","equipo"); </script>
</head>
<section class="sideSection" id="misturnos">
  <h1>Mis Turnos</h1>
	<div>
		<div class="contenedorBotones">
			<div class="btnEquipo btnActive"  >
				<a class="boton">Mis Turnos</a>
			</div>
			<div class="btnEquipo"  >
				<a class="boton">Solicitudes Enviadas</a>
			</div>
			<div class="btnEquipo"  >
				<a class="boton">Turnos como Jugador</a>
			</div>
		</div>
		<div id="contenedorTurnos" class="divContenedor">
			<ul>
				<li class="botonesTurnos">
					<div class="btnActive">
						<a class="boton">Turno simple</a>
					</div>
					<div>
						<a class="boton">Equipo vs Equipo</a>
					</div>
					<div>
						<a class="boton">Equipo vs Invitado</a>
					</div>
				</li>
				<li class="contenedorTablaTurnos">
					<div class="lista3Col" id="tSimple">
							<?php 
								echo '<ul>
										<li>Fecha</li>
										<li>Lugar</li>
										<li></li>
									</ul>
									<ul>';
								if(isset($turno['simple'])){	
									foreach($turno['simple'] as $valor){
										echo '<li  class="lista3Row">';
										echo	'<ul>';
										echo		'<li>' . $valor['fecha'] . $valor['hora']."hs" . '</li>';
										echo		'<li>' . $valor['direccion'] . "|" . $valor['cancha'] .'</li>';
										echo		'<li> <button class="boton rechazar" onclick="cancelarTurno('. $valor['id'] .')">Cancelar</button> </li>';
										echo	'</ul>';
										echo '</li>';
									}
								}
								echo '</ul>';
							?>
					</div>
					<div class="lista6Col" id="tTvT">
						<?php
							if($miequipo){
								echo '<ul>
										<li>Equipo</li>
										<li>Edad media</li>
										<li>Fecha</li>
										<li>Lugar</li>
										<li></li>
										<li></li>
									</ul>
									<ul>'; 
								if(isset($turno['tvt'])){		
									foreach($turno['tvt'] as $valor){
										echo '<li  class="lista6Row">';
										echo	'<ul>';
										echo		'<li> <img src="img/' . $valor['img_equipo'] . '"></li>';
										echo		'<li>' . $valor['equipo'] . '</li>';
										echo		'<li>' . $valor['edad'] . '</li>';
										echo		'<li>' . $valor['fecha'] . $valor['hora']."hs" . '</li>';
										echo		'<li>' . $valor['direccion'] . "|" . $valor['cancha'] .'</li>';
										echo		'<li> <button class="boton rechazar" onclick="cancelarTurno('. $valor['id'] .')">Cancelar</button> </li>';
										echo 		'<li>
														<span class="masDetalles"> Mas detalles </span>
													</li>';
										echo 		'<li>
														<div class="detalles">
															<ul>
																<li>Jugador</li>
																<li>Edad</li>
																<li>Usuario</li>
															</ul>';
										echo				'<ul>';
										echo					'<li>' . $valor['capitan'][0]['nombre'] ." (C)". '</li>';
										echo					'<li>' . $valor['capitan'][0]['edad'] . '</li>';
										echo					'<li>' . $valor['capitan'][0]['user'] . '</li>';
										echo				'</ul>';
															foreach($valor['jugadores'] as $valorJug){
																echo	'<ul>';
																echo		'<li>' . $valorJug['nombre'] . '</li>';
																echo		'<li>' . $valorJug['edad'] . '</li>';
																echo		'<li>' . $valorJug['user'] . '</li>';
																echo	'</ul>';
															}
										echo 			'</div>
													</li>';
										echo 	'</ul>
											</li>';
									}
								}
								echo '</ul>';
							}else{
								echo '<div class="sinEquipo">';
									include('sinequipo.html');
								echo '</div>';
							}
							?>
					</div>
					<div class="lista6Col" id="tTvI">
						<?php
							if($miequipo){
								echo '<ul>
										<li>Equipo</li>
										<li>Edad media</li>
										<li>Fecha</li>
										<li>Lugar</li>
										<li></li>
										<li></li>
									</ul>
									<ul>'; 
								if(isset($turno['tvi'])){
									foreach($turno['tvi'] as $valor){
										echo '<li  class="lista6Row">';
										echo	'<ul>';
										echo		'<li> <img src="img/' . $valor['img_equipo'] . '"></li>';
										echo		'<li>' . $valor['equipo'] . '</li>';
										echo		'<li>' . $valor['edad'] . '</li>';
										echo		'<li>' . $valor['fecha'] . $valor['hora']."hs" . '</li>';
										echo		'<li>' . $valor['direccion'] . "|" . $valor['cancha'] .'</li>';
										echo		'<li> <button class="boton rechazar" onclick="cancelarTurno('. $valor['id'] .')">Cancelar</button> </li>';
										echo 		'<li>
														<span class="masDetalles"> Mas detalles </span>
													</li>';
										echo 		'<li>
														<div class="detalles">
															<ul>
																<li>Jugador</li>
																<li>Edad</li>
																<li>Usuario</li>
															</ul>';
										echo				'<ul>';
										echo					'<li>' . $valor['capitan'][0]['nombre'] ." (C)". '</li>';
										echo					'<li>' . $valor['capitan'][0]['edad'] . '</li>';
										echo					'<li>' . $valor['capitan'][0]['user'] . '</li>';
										echo				'</ul>';
															foreach($valor['jugadores'] as $valorJug){
																echo	'<ul>';
																echo		'<li>' . $valorJug['nombre'] . '</li>';
																echo		'<li>' . $valorJug['edad'] . '</li>';
																echo		'<li>' . $valorJug['user'] . '</li>';
																echo	'</ul>';
															}
										echo 			'</div>
													</li>';
										echo 	'</ul>
											</li>';
									}
								}
								echo '</ul>';
							}else{
								echo '<div class="sinEquipo">';
									include('sinequipo.html');
								echo '</div>';
							}
						?>
					</div>
				</li>
			</ul>
		</div>
		<?php include('solicitudes.html');?>
		<?php include('comojugador.html');?>
	</div>
	</div>
	<div id="registrar">
		<a onclick="turnos.toggle();" class="boton" id="btnEditar">Registrar turno ahora</a>
	</div>

	<div id="nuevoTurno" style="display:none">
		<h5>Reservar turno</h5>
		<form name="turno" action="" onSubmit="turnos.crearTurno(); return false">
			<div class="stepTab">
				<label>Tipo de Turno: 
					<select name="tipo_turno">
						<option value="0">Simple</option>
						<option value="1">Mi Equipo VS Otro Equipo</option>
						<option value="2">Mi Equipo VS Invitado</option>
					</select>
					<input name="eq_rival" id="eq_rival" autocomplete="off" placeholder="Equipo a desafiar" style="display:none;">
				</label>
				<div class="hint">
					<span>Ayuda:</span>
					<ul>
						<li>Turno simple: </li>
						<li>Turno simple: </li>
						<li>Turno simple: </li>
						<li>Turno simple: </li>
					</ul>
				</div>
			</div>
			<div class="stepTab">
				<label>Cancha: 
					<select name="cancha_turno" onchange="turnos.horariosDisponibles();" required></select>
				</label>
				<div class="hint">
					<span>Ayuda: Canchas disponibles para solicitar turnos</span>
				</div>
			</div>
			<div class="stepTab">
				<label>Fecha:
					<input type="date" name="fecha_turno" max="<?php echo date("Y") . '-12' . '-31' ;?>" min="<?php echo date("Y-m-d");?>"  value="<?php echo date("Y-m-d");?>" onchange="turnos.horariosDisponibles();" required/>
				</label>
				<div class="hint">
					<span>Ayuda: Seleccione la fecha para reservar el turno</span>
				</div>
			</div>
			<div class="stepTab">
				<label>Horario: 
					<select name="horario_turno" required></select>
				</label>
				<div class="hint">
					<span>Ayuda: Se muestran las horas disponibles para reservar un turno. Si no ve ninguna disponible significa que no hay turnos disponibles.</span>
				</div>
			</div>
			<div class="stepTab">
				<label>Resumen de turno:</label>
				<div id="resumenTurno">
					<span>Tipo de turno:</span>
					<span>Cancha:</span>
					<span>Fecha: </span>
					<span>Hora: </span>
				</div>
				<div>
					<input class="boton" type="submit" name="confirmar" value="Confirmar Turno"></input>
				</div>
			</div>
			<div id="contenedorAtrasAdelante">
				<button class="boton" type="button" id="prevBtn" onclick="turnos.nextPrevTab(-1)">Atras</button>
				<button class="boton" type="button" id="nextBtn" onclick="turnos.nextPrevTab(1)">Siguiente</button>
			</div>
			<div class="stepContenedor">
			  <span class="step"></span>
			  <span class="step"></span>
			  <span class="step"></span>
			  <span class="step"></span>
			  <span class="step"></span>
			</div>
		</form>
		<a class="boton rechazar" onclick="turnos.toggle();">Cerrar</a>
	</div>

</section>
<?php include('assets/template/baseTail.html'); ?>
